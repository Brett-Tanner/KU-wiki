---
title: Event Site Overview
description: An overview of the event registration site.
tableOfContents: false
editUrl: false
---

import { Tabs, TabItem } from "@astrojs/starlight/components";
import ExistingCustomerFlow from "../../../components/event/ExistingCustomerFlow.astro";
import NewCustomerFlow from "../../../components/event/NewCustomerFlow.astro";

This site was originally created to replace the previous registration process for seasonal events. It has since grown to encompass many more features and events than originally intended, including setsumeikais, surveys and single day parties like Chocolate Party & Science Day.

This page starts by explaining the previous event registration process and comparing it to the current site for context, then provides a thorough explanation of the site's current features.

<Tabs>

<TabItem label="Customer Features" icon="star">

:::note
Screenshots for customer features are provided in mobile format, as analytics show this is how most customers interact with the site.
:::

## Historical Context

Parents registered for activities from a Google Form, which updated a Google Sheet containing all the registrations for a given school.

This was not a great experience for parents, who had to register for each activity from a different page, re-enter their information and their child's for each event, and repeat the entire process for each child.

It was also impossible to edit a booking once made without contacting the school, creating extra work for both parents and school managers.

By contrast the site allows all activities and options to be registered for from a single page by clicking toggles, saves parent & child information between events (and updates children with information from the SS) and allows registrations for one child to be copied to a sibling with the click of a button.

Customers can edit their booking at any time prior to its confirmation by the SM, without any interaction by KU staff.

<ExistingCustomerFlow />

<NewCustomerFlow />

</TabItem>

<TabItem label="Staff Features" icon="document">

## Historical Context

Staff managed registrations for each event using a Google Sheet which took minutes to load and would often become unresponsive, requiring another minutes-long reload.

Email templates were provided, but could only be sent by manually copying the template into a separate email client, and there was no way of verifying student or parent information.

The site replaced the Google Sheet with a simple table on a web page, which commonly loads in less than a second and never more than 2-3 seconds.

Emails are sent automatically on booking creation, confirmation and any changes. Student information is known to be correct as it's provided by the SS, and parents/child details are only a click or two away from the table.

## School Managers & above

## Area Managers & above

## Admins

</TabItem>

<TabItem label="Technical Details" icon="seti:html">

## Feature Overview

### Users

- Have one of 5 roles; Admin, Area Manager, School Manager, Statistician and Customer
  - Each role has different permissions, allowing them to access different features of the site.
  - Permissions/access controlled by the Pundit gem
  - Full unit & request test coverage of permissions for all controllers
  - Ensured by after_action callbacks on controllers which raise an error if authorisation not performed
- Customers
  - Can view their children and their bookings
  - Can make bookings for their children at any ongoing event at any school
  - Can edit their bookings for ongoing events, and view bookings for past events
  - Can claim a child based on their SSID & birthday, or add a new child
  - Can manage their email preferences and personal information
- Statisticians
  - Can view event summary statistics for all current events on profile
  - Can view statistics dashboard for all schools and any individual school
  - Can view survey results for all schools
- School Managers
  - Booking Management
    - Can merge multiple bookings into one so their total cost can be calculated together and a single summary can be generated
  - Child/Customer Management
  - Event Management

  - Can view event summary statistics and daily activity attendance for their school on their profile
  - Has a list of all invoices they deleted and their summary/total cost on their profile
  - Can edit their school's information
  - Can create/manage setsumeikais for their school
  - Can view and manage inquiries for their school
  - Can view survey responses for their school
  - Can access statistics dashboard for their school
  - Can manage all bookings for events at their school
    - Confirm, with or without automated email
	- Add manual adjustments
	- Edit directly, from the same UI as customers
  - Can access the event sheet for events at their school. For each registered student shows:
    - Basic student info
	- Notifications for unusual events like students attending at a school different to their usual one or students missing ids, which link to a page which allows corrective action to be taken
	- List of student bookings for this event with cost & link to booking
	- Total cost for this event
	- A modal to show the booking summary
	- Various toggles to mark the status of the booking, e.g. seen (reset on change), entered into SS, email sent
	- Any coupons applied to the student's bookings
	- A full list of activities the student will attend, with options and a link to the attendance sheet for each activity
  - Can access attendance sheets for each activity at their school
    - List names of all students attending, along with their options, photo status, membership status, allergies and kindy/elementary status
	- Relevant columns have a count of the children they apply to, for example the number of kindy/elementary kids in the attendance column or the number of photo kids in that column
  - Can access full lists of students and parents associated with their school, as well as their profiles & information
  - Can access a list of activities for each event at their school, and view their open/closed status
  - Can access a list of all past events at their school, as well as the associated event/attendance sheets
- Area Managers
  - All School Manager capabilities, but for all schools in their managed areas
  - Additionally, can manually close or open activities


### Bookings (model name is Invoice)

- Options
  - Auto-destroyed if associated slot is de-registered
  - Photo service applies automatically if a sibling selected it

### Events

- Time Slots
  - Can be manually opened and closed, preventing further registrations. Also automatically close on a given date.

### Statistics Dashboard

## Key Gems

### Devise

### Prawn

### Pundit

## Hosting

## Misc

Analytics provided by Microsoft Clarity.

</TabItem>

</Tabs>
